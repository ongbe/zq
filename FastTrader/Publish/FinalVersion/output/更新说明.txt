

1.7.2.30
	发布时间：2014.9.29
	修改内容：
	【2014.10.08】
		1. GetCurrencys()取全部CurrencyID
	【2014.9.29】
		1. 增加期权合约报单冻结保证金的计算
		2. 增加期权合约持仓明细的保证金计算。期权持仓明细暂不考虑组合优惠
		3. 增加期权合约持仓的保证金计算。期权持仓明细暂不考虑组合优惠
		4. 合约列表中，期权手续费率和交易成本查询回来时，更新合约信息的显示

1.7.2.29
	2014.9.24
	【2014.9.23】
		1. 查询到手续费率响应后，原来在m_pDataMgr->OnRspQryInstrumentCommissionRate()中判断是品种手续费还是合约手续费，现改为在DataCenter中判断
		2. ExtListCtrl中增加RefreshHeader()方法。合约列表中，从无垂直滚动条切换到有垂直滚动条的窗口，如果水平滚动条在最右边，存在表头未刷新的问题。强制刷新一下表头
		3. 在合约列表中显示期权的行权手续费率和保证金最新部分及最小保证金

	【2014.9.22】
		1. 在xml中以统一方式缓存当日交易参数、品种、合约、手续费率、保证金率等信息
			1) 分别保存为tradingparam.xml、product.xml、instrument.xml、commissionrate.xml、marginrate.xml
			1) 在DataCenter.cpp的BID_RspUserLogin时读取并设置到底层数据集中
			2) 在收到最后一条合约信息和最后一条品种信息时，保存合约信息和品种信息
			3) 在收到经纪公司交易参数时，保存之
			4）在DataCenter析构时，保存费率
		2. 原来UserLoginCore的PreLoginQuery()中加载本地品种和合约信息删除，改为在StartLoginQuery()判断当前底层是否有品种和合约信息，没有则查询
		3. UserLoginCore中不再加载LoadCommissionRateAndMarginRate
		4. UserLoginDlg::QryInstrumentListCallBackFunc()中不再保存当日合约信息

	【2014.9.19】
		1. 将插件接口PlusinAPI的Debug编译目标目录放到debug/Plugin下
		2. 修改缓存/加载当日合约信息时double处理的错误
		3. QryQueue查询费率的顺序调整：
			1) 对手续费和保证金都只查一次。查不到不管了
			2) 先用InstrumentID为空查手续费率、保证金率、期权手续费率、期权交易成本，以取到持仓合约的相关值
			3) 用m_bStartQryRate表示是否已经开始查询费率
			4) 刚开始查询费率时，将合约按顺序放到m_InstrumentIDsNeedQry队列中。顺序为：期权标的物合约(RunMode3)/期权合约(3)/期货合约(123)/期权合约(12)
			5) 如果某个合约查询无费率，将同品种的其它合约移到m_InstrumentIDsNeedQry2队列后面，最后再查

	【2014.9.17】
		1. 将当前服务器信息tagServerParamCfg的current更名为CurSvrGrpID，表示当前的服务器组ID
		2. 登录成功后，检查tradingparam.xml中的tradingday，如果不是当前交易日，则删除配置文件
		3. 查询结算信息确认结果响应后，检查tradingparam.xml中是否缓存了BrokerTradingParams，如果没有，启动查询

	【2014.9.17】
		1. 修改CPlatformDataMgr_LoginInfo，保存ctp的完整登录信息。增加PlatformStru_LoginInfo结构体
		2. 每天首次启动时查询交易参数ReqQryBrokerTradingParams。从中取到OptionRoyaltyPriceType，用于期权权利金计算。
		   查到后保存到tradingparam.xml中，当天以后直接从文件中读取。在查询结算信息确认相应后，将查询指令放到查询队列中去
		   仅在RunMode==2/3下查询
		3. 手续费率数据结构增加执行手续费，期权合约利用ReqQryOptionInstrCommRate得到手续费率, 扩展PlatformStru_InstrumentCommissionRate结果，增加执行手续费
		4. 用ReqQryOptionInstrTradeCost()获取投资者期权合约保证金不变部分和最小保证金，扩展PlatformStru_InstrumentMarginRate，增加期权交易成本信息
		5. 底层查询费率时，在QryQueue中QryID_ReqQryInstrumentCommissionRate时，期货查期货费率，期权查期权费率；在QryID_ReqQryInstrumentMarginRate时，期货查保证金率，期权查交易成本
		6. 修改第三方插件接口
			//CMDID_PRODUCT_LIST_QUERY                      : 查询指定交易所的品种列表。参数为ExchangeID；成功时返回n*32字符串数组。第一个字符串是ExchangeID，后面是结果(n-1)个ProductID
			//CMDID_OPTIONUNDERLYINGPRODUCT_LIST_QUERY      : 查询指定交易所的期权标的物品种列表。参数为ExchangeID；成功时返回n*32字符串数组。第一个字符串是ExchangeID，后面是结果(n-1)个ProductID
			//CMDID_OPTIONINSTRUMENTSBYUNDERLYING_LIST_QUERY: 查询指定标的物品合约对应的期权合约。参数为UnderlyingInstrumentID；成功时返回n*32字符串数组。第一个字符串是UnderlyingInstrumentID，后面是结果(n-1)个期权InstrumentID
			//CMDID_INSTRUMENT_LIST_BYPRODUCTID_QUERY       : 查询指定品种对应的合约。参数为ProductID；成功时返回n*32字符串数组。第一个字符串是ProductID，后面是结果(n-1)个期权InstrumentID

	【2014.9.15】
		1.  CPlatformDataMgr::m_baseFTID/m_baseUpdateSeq改用static变量
			1) 为了兼容多账号版本，以便于在多账号中使用统一的FTID和UpdateSeq, 避免由于不同账号的FTID相同导致UI更新异常
			2) 每个记录数据的FTID的不变的，因此多账号里使用同一个baseFTID不会引起long不够用的问题。
			3) UpdateSeq在多账号里可能出现long不够用的问题，如7fffffff递增后0。由于UpdateSeq只进行是否相等的判断，不进行大于小于的判断，因此折返为0的情况不影响系统运行
		2.  记录线程创建信息到threadid.log中
		3.  版本号更新到1.7.2.28
		4.  底层增加接口：
			//获取所有标的物期货合约
			virtual int GetAllOptionUnderlyingInstrumentIDs(vector<string>& outUnderlyingInstrumentIDs)=0;
			virtual int GetAllOptionUnderlyingInstrumentIDs(set<string>& outUnderlyingInstrumentIDs)=0;
			virtual bool IsCommissionRateExist(const string& InstrumentID)=0;
			virtual bool IsMarginRateExist(const string& InstrumentID)=0;
			
	【2014.9.12】
		1. CQryQueue的静态变量m_bInQry改为CPlatFormService的类成员，便于在TradeSpi中可以访问。静态变量在多账号版本下，由于多个底层实例同时访问，会出现冲突而失去作用
		2. 优化CQryQueue中的SendQryCmd()，简化逻辑，提交效率。解决在多账号(10个账号，总共700多持仓明细)条件下卡死的问题
		3. CDataCenter()的析构里先调用Stop()，解决多账号下，未登录而直接退出导致异常的问题
	
1.7.2.27
	2014.9.5
	
	【2014.9.5】
		1. 修改wxEVT_GRID_INSTRUMENTID_CHANGED相关处理，GetInt()为EvtParamID，GetExtraLong()为发送者GID
		2. 使T型报价窗口能处理报价表当前合约变更事件
		3. OptionTPriceWrapper在更改当前期权合约后，马上将合约的最后一条行情推送给TPriceList
		4. 修改FastTraderSetup-simu-option.iss
			1) [Files]删除旧的OptionPriceListT插件
			2）[Files]排除commonfiles路径下的layout子目录以及layout.xml 
			3) source\FastTrader-simu-option路径下加入专有layout.xml
		5. 发布1.7.2.27期权交易终端，用于测试T型报价模块

	【2014.9.4】
		1. 修改保存/加载当天合约信息的模块，提高加载速度

	【2014.9.3】
		1. 报价表改变当前合约后，向T型报价窗口发送消息
		2. 底层增加GetOptionInstrumentIDsByUnderlyingInstrumentID()，根据标的物期货合约，取对应的期权合约
		3. CPlatformDataMgr_Instruments::m_OptionProductIDsByExchangeID更名为m_OptionUnderlyingProductIDsByExchangeID
		4. 第三方插件接口增加CMDID_OPTIONINSTRUMENTSBYUNDERLYING_LIST_QUERY/RSP命令字
			#define CMDID_OPTIONINSTRUMENTSBYUNDERLYING_LIST_QUERY	0x3014	//查询标的物期货合约对应的期权合约列表。参数为Underlying InstrumentID
			#define CMDID_OPTIONINSTRUMENTSBYUNDERLYING_LIST_RSP	0x3015	//查询标的物期货合约对应的期权合约列表响应。成功时lpData指向字符串数组，每个字符串64字节，放一个Option InstrumentID; cbData等于品种数量*64
		5. 对于期权终端(RunMode==2/3)，因此下单板切换菜单，以及交易风格切换菜单，增加【深色背景/浅色背景】菜单
		6. 对于期权终端，在【帮助】-【关于】里显示【中国国际期货期权交易终端】

	【2014.8.29】
		1. 增加期权T型报价模块
			1) 增加GID_OptionTPrice=8138，标志T型报价模块
			2) 将TPriceList项目加入到FastTrader的sln中
			3) 创建TPriceList的父窗口COptionTPriceWrapper，在里面创建TPriceList窗口

1.7.2.26
1. 原底层提供的GetProductID()接口更名为GetProductID_InstrumentIDsByExchangeID()
2. 修改底层提供的GetProductList()接口，使用vector代替set
3. 底层增加GetOptionProductIDsByExchangeID()接口，用于获取指定交易所的期权标的物期货品种
4. 第三方插件接口增加CMDID_OPTIONUNDERLYINGPRODUCT_LIST_QUERY/RSP命令字，用于
	#define CMDID_OPTIONUNDERLYINGPRODUCT_LIST_QUERY	0x3012	//查询特定交易所的期权标的物期货品种列表。参数为ExchangeID
	#define CMDID_OPTIONUNDERLYINGPRODUCT_LIST_RSP	    0x3013	//查询特定交易所的期权标的物期货品种列表响应。成功时lpData指向字符串数组，每个字符串64字节，放一个ProductID; cbData等于品种数量*64
5. CPlatformDataMgr_Instruments类成员变量m_allProductID更名为m_allInstrumentIDsByProductID


1.7.2.26
1. ctp API：启用6.3.0API，支持期权(用于期权开发，暂不能发布标准版)
2. platform.xml：增加RunMode节，配置运行模式
3. 底层：增加品种信息管理
	启动时查询品种信息
	并在PlatformDataMgr_Instrumnets模块中管理品种信息
	提供GetProductList()、GetProductInfo()、GetProductInfo2()接口供UI层获取品种列表和品种信息
4. 第三方插件接口：增加CMDID_PRODUCT_LIST_QUERY/RSP、CMDID_PRODUCT_INFO_QUERY/RSP命令字用于获取品种列表和品种信息
5. 日内保存合约信息文件由Instruments.txt改为Instruments.xml
6. 日内保存品种信息到Products.xml中



1.7.2.24
1.  修改资金密码时需要指定货币币种，否则无法修改
2.  如果设置了成交后重查，则初始化查询完持仓后再查询一次资金，以保证资金和服务端的一致
3.  查询保证金率返回时，如果持仓保证金没有变化，则不更新资金数据。(为了保证上一条的落实。)
3.  修改updatelib中Cdoupdate里m_pRcvData的定义，改为成员变量指针，目的是为了避免updateexe.exe不再被360杀毒误报
4.  解决:查询出入金银行名称错误问题；银期转账流水列错误问题
5.  出入金查询列表内，银行代码列改为银行简称列
6.  解决盈损条件单触发时未及时刷新状态的问题。
7.  按大额单边保证金算法计算保证金时，如果交易所保证金无效，或双边交易所保证金相等，则用投资者保证金进行比较，取大者。
8.  日内第一次启动时，查询到合约信息后，将合约信息保存到Instruments.txt时，将合约的MaxMarginSideAlgorithm、CombMarginDiscountMode、UnwindPriorities、PriceForMarginOfTodayPosition、CloseTodayInstructionSupport、CloseInstructionSupport等信息也保存进去。待日内再启动时，直接从文件中读取。

1.7.2.22
1.  重新发布股指仿真版本，包含期权T型报价功能

1.7.2.22
1.  使用6.2.5版ctp api
2.  银期查询和转账时指定货币

1.7.2.21
发布时间:2014-5-26
1.  修改插件dll工程设置，使之不依赖于动态MFC库，并修改编译结果文件的输出位置
2.  添加新合约的短代码和快捷输入方式。
3.  修改套利插件的提示窗口标题
4.  重新发布T型报价插件，适用于郑商所期权

1.7.2.20
发布时间:2014-5-13
1.  增加非交易所支持套利插件。发布模拟插件版和标准插件版

1.7.2.19
发布时间:2014-4-29
1.  解决持仓里持仓均价、开仓均价小数点位数不对的问题。
    上一版本按最小变动价位保留小数点位数，如i1409最小变动价位为1，某账户持仓在监控中心显示为771.50, 在我们软件里显示为772。
	修改后，按最小变动价位小数位+1保留均价的小数位，最小保留2位。

1.7.2.9
发布时间:2014-4-3
1.  下单版增加投机/套利/套保的选项。进行套利交易时，中金所使用单腿合约，选择"套利"；郑商大商使用套利合约即可，选择"投机"；上期使用单腿合约，选择"投机"

1.7.2.7
1.  调整UI界面上[扩展]面板中按钮的位置和文字。
2.  禁止针对组合合约下盈损单

1.7.2.6
1.  重构升级程序和升级服务器

1.7.2.1
1.  统一多账号版本和标准版的公共代码

1.7.1.9
发布时间:2014-1-3
1.  解决撤销已车停止单无提示的问题。FASTTRADE-106
2.  解决条件单触发log中增加开平方向的问题。FASTTRADE-108
3.  解决持仓止盈止损新增、编辑时log文字错误的问题。FASTTRADE-103
4.  解决点击出入金查询按钮多次出现重复记录的问题。FASTTRADE-116
1.  实现本地预埋单、条件单、停止单按交易日变动自动过期并删除的功能。
2.  实现停止单全撤功能。FASTTRADE-107
3.  解决log记录不全的问题。FASTTRADE-102
4.  无行情的合约，下单时不判断是否超过涨跌停板。FASTTRADE-109 	

1.7.1.8
1. 当无报单和成交时，不更新可平量。(杨)
2. 解决登录时勾选上隐藏账户，锁屏后没有隐藏账户名的问题。FASTTRADE-111(杨)
3. 解决执行已发送的本地条件单时，弹出两次失败提示的问题。FASTTRADE-112(杨)
4. 实现FAK下单最小数量提示框，输入值范围应该包括“0”。FASTTRADE-113(杨)
5. 实现FOK下单指令，最小数量输入框应该灰显。FASTTRADE-114(杨)
6. 解决下单确认配置项对市价反手，快捷平仓，快捷锁仓不起作用的问题。FASTTRADE-115(杨)

7. 更新行情时，不再进行时间无效性判断

1.7.1.5
发布时间:2013-12-26
1. 修改底层算法
2. 增加http代理


1.6.0.21
发布时间:2013-8-15
1. 插件NationalInstPrompt根据上海要求修改：算法将“现荒勘昙鄹瘛贝笥诘扔谑侄设置的“现患鄹瘛碧婊辉来的小于
2. 发布实盘算法版和模拟算法版。

1.6.0.20
发布时间:2013-8-14
1. 增加插件NationalInstPrompt(国债期限套利机会提示)。根据上海要求开发
2. 发布实盘算法版和模拟算法版。


1.6.0.14
发布时间:2013-7-5
1. 增加编译版本：FastTrader-std-AlgoTrading，实盘算法版
2. 将PlatformDataMgr中的strcpy_s都改为strncpy。前者在字符串超限时报异常，在orderref拷贝时出错
3. 发布实盘算法版和股指模拟算法版。

1.6.0.13
发布时间:2013-6-3
1.使用2013-4-2发布的ctpapi。
2.新增FAK/FOK下单指令。

1.6.0.11
发布时间:2013-5-31
1. 增加夜盘测试版 FastTrader-simu-ContinuousTrade
2. 使用20130402的ctp api

1.5.0.7
发布时间:2012-8-10
1.为使用多账号，修改对应底层代码
2.一键下单：解决右键开平combobox控件为设处置的导致是否下单判断失败的问题。PLUG-88
3.解决扩展面板选择服务器条件单、服务器预埋单立即执行不变灰的问题。FASTTRADE-19
4.修改【选项设置-下单及反馈】与【设置-委托参数】内的下单反馈选项不一致的Bug。Bug ID Fasttrader-18
5.屏蔽掉【选项设置-键盘快速下单】中的【发出报单是填充下单板】按钮。
6.修改插件文件保存路径为plugin，修改系统插件及用户插件配置文件后缀名为.plugin。对应Bug ID Plug-85
7.修改主菜单中的“插件管理”菜单名为“高级”，对应Bug ID Plug 76
8.md5值相关的代码先去掉，有时候getFileMd5Value得到的值为空，刚好如果配置文件也md5配了空的话，就不下载文件了
9.升级配置文件目前还是保留md5的值，兼容之前升级程序可能有的bug
10.FASTTRADE-13	内盘，拉伸资金列表可挡住查询按钮
11.修改委托单和挂单列表调整顺序后，无法正确保存配置的问题。Bug ID Plug-92
12.修改系统退出时，用户插件保存错误的问题。Bug ID Plug-86
13.PLUG-94内盘，当系统配置文件系统参数隐身热键发生改变后，启动客户端，系统参数恢复默认设置，无法启用系统配置文件的参数。
14.插件配置文件中，增加StartWhenRegist项目，控制插件注册时，是否要立即启动。对应Bug ID： Plug-31
15.PLUG-77 内盘，k线插件启动后，点击合约组应该返回报价表。
16.修改插件文件路径，为每个插件建立文件夹
17.一键下单：修改合约简称表的存储位置，将其放到文件中。修改下单板合约弹出框。修改配置程序合约弹出框。修改一键下单合约弹出框。
18.上传合约简称表的配置文件。
19.重构本地单底层服务程序及数据结构，主要重构条件单、盈损单。FASTTRADE-23
20.新增盈损明细单。FASTTRADE-23
21.修改界面层，包括：下单板、批量单面板、预埋单面板、条件单面板、盈损单面板、条件单编辑窗、盈损单编辑窗。FASTTRADE-23
22.实现盈损明细面板，盈损明细编辑，修改盈损单公用下单块。FASTTRADE-23
23.添加修改配置文件。FASTTRADE-23
24.修改mainframe发声代码，提高通用性。FASTTRADE-23
25.解决内盘对与盈损单有关的挂单进行撤单和改单时没有提示的问题。FASTTRADE-10
26.调整转换策略，当一边止盈止损后，忽略用户的条件单转换要求。FASTTRADE-38
27.统一把删除字样该为撤单字样。FASTTRADE-35
28.修改配置，调整代码。FASTTRADE-31
29.修改配置文件，调整提示语。FASTTRADE-33
30.解决反向加减错误的问题。FASTTRADE-34
31.修改配置，调整提示语。FASTTRADE-36
32.修改配置，调整提示语。FASTTRADE-37
33.在挂单、报单板块撤与盈损单关联的报单时，弹出提示。FASTTRADE-10
34.FASTTRADE-28	用户登录界面，输入密码时出现的软键盘，点击关闭按钮失效
35.FASTTRADE-29	交易风格切换时不相符
36.解决服务器条件单转化为本地单成功，但提示失败的问题。FASTTRADE-41
37.OnRspOrderInsert和OnErrRtnOrderInsert向GUI发送不同的BID数据包
38.解决盈损明细编辑是，没有按不同状态给出不同提示的问题。FASTTRADE-42
39.解决服务器条件单因超限失败会重复弹出两条提示的问题。FASTTRADE-40
40.实现盈损明细弹出对话框列配置改变时及时刷新的功能。FASTTRADE-44
41.盈损明细列表添加配置响应。FASTTRADE-32
42.响应服务器条件单因超限失败的转换配置。
43.解决条件单开平提示错误的问题，和服务器条件单转换为本地条件单开平错误的问题。

1.5.0.5
发布时间:2012-7-3
1.K线模块修改相应bug
2.一键下单修改相应bug
3.解决FASTTRADE-4 内盘，偶发扩展内的条件单、预埋单、盈损单、批量单列表被拆开显示。
4.解决FASTTRADE-5 立即执行本地条件单后刷新列表出现不按设置条件刷新的问题。
5.解决在没有查询到资金前显示资金信息崩溃的问题
6.将插件存放位置修改为 当前目录\plusin下面。对应Bug ID：plus-65
7.解决批量单列数为0时不插入行，程序崩溃的问题
8.解决行情重连也发送(wxEVT_RTN_RECONNECTED各个模块重新查询的问题
9.当交易服务器断开重连后，需要重查数据比较大时提示是否重查
10.安装程序支持新版cifcoServersHall

1.5.0.1
发布时间:2012-6-18
1.K线模块修改相应bug
2.一键下单修改相应bug
3.添加删除定期删除7天前log文件
4.解决插件窗口被点击时，无法置顶的问题。
5.配置模块分离为系统配置和用户配置。
6.插件增加“不不要停靠，但需要绑定主窗体”枚举项。
7.实现通过按钮选择服务器的方式

1.3.2.85
发布时间：2012-6-5
1.集成一键下单插件
2.修改点击插件菜单时，插件无法启动的问题。
3.添加是否支持插件接口，取消_USE_PLUGIN_MGR宏开关
4.修改CMDID_ALL_ORDER_WAIT_ORDER_NUM_QUERY命令内容返回不正确的问题。
5.增加插件调试开关，控制插件心跳与发送消息方法。
6.修改下单板当前合约设置错误的问题。

1.3.2.84
发布时间：2012-6-4
1.不再编译Module-Interface和Module-WebPanel两个工程
2.插件在主菜单的响应和报价表右键菜单的响应
3.插件模块改为先注册，再启动模式,增加插件配置文件。
4.CifcoServicesHall更新版本

1.3.2.83
发布时间：2012-5-31
1.重构金士达和快期风格下的银期转账
2. 解决下列bug
FASTTRADER-1368  内盘，增强版登录后，服务平台窗口会遮挡住交易终端。
FASTTRADER-1365  内盘，重新登录窗口弹出后，不应该运行自动升级功能。   
FASTTRADER-1367  内盘，出入金查询界面取消按钮没有实际作用，应该去掉。 
FASTTRADER-1364  内盘，切换到经典风格后，银期转账窗口调整大小，交易明细列表框不随之改变大小 
 
1.3.2.82
发布时间：2012-5-29
1.  语言对照表CFieldValueTool_UNKOWN改为CFieldValueTool_Unknown，解决下单时报单列表框状态栏闪一下的问题

1.3.2.81
发布时间：2012-5-29
更新内容：
1.  解决中国银行无法查询账户余额的问题。

1.3.2.80
发布时间：2012-5-28
更新内容：
1.  根据不同发布版本，在登陆界面上显示不同的版本类型文字。

1.3.2.79
发布时间：2012-5-25
更新内容：
1.  解决FASTTRADER-1347  内盘，网络中断时间段内成交的报单，重新连接网络后不能得到正确记录。

1.3.2.78
发布时间：2012-5-24
更新内容：
1.  资金面板各项只在list方式显示两位小数。

1.3.2.77
发布时间：2012-5-23
更新内容：
1.  增加下单时，当价格超过涨跌停时提示。
2.  条件单、盈损单、预埋单、批量单的数据列表委托价格在为市价时提示有0改为"市价"。
3.	在FastTrader关闭时强行杀死升级程序
4.	资金面板各项显示两位小数
5.	解决FASTTRADER-1353 内盘，初始化小窗口内，勾选五档行情会遮挡住资金列表内的查询按钮   
6.	解决FASTTRADER-1351  内盘，设置-系统参数取消所有勾选键位后，再次进入系统参数设置，保存并返回主界面按钮失效。   

1.3.2.76
发布时间：2012-5-22
更新内容：
1.	解决模拟账户，CifcoServicesHall显示乱码问题。
2.	登陆界面添加check控制登陆网上中期客户服务平台
3.	解决FASTTRADER-1349  内盘，置顶后选择重新登录，登录窗口被挡在主程序后面。  
4.	解决FASTTRADER-1346  内盘，卸载时候，卸载不干净，剩一个文件  

1.3.2.75
发布时间：2012-5-22
更新内容：
1.	在platform.xml中配置CifcoServicesHall功能是否启动(liao)

1.3.2.74
发布时间：2012-5-21
更新内容：
1.	改变载入中期客户服务平台程序方式

1.3.2.73
发布时间：2012-5-21
更新内容：
1.	添加载入中期客户服务平台程序CifcoServicesHall

1.3.2.72
发布时间：2012-5-21
更新内容：
1.	调整编译选项，解决某些机器没有运行时库文件无法运行的问题

1.3.2.71
发布时间：2012-5-18
更新内容：
1.	解决有时出现平仓(持仓明细)顺序不对的问题。
2. 	解决撤单时持仓的冻结保证金计算错误的问题。

1.3.2.70
发布时间：2012-5-17
更新内容：
1.	解决初始没费率时，成交的手续费算不出来的问题(liao)
    	解决网速慢时，合约首次行情到达慢，导致持仓的占用保证金不能刷新的问题


1.3.2.69
发布时间：2012-5-15
更新内容：
1.	1)解决本地条件单重复激活、暂停不提示的问题，FASTTRADER-1338(yang)
	2)解决下单板切换下单风格是界面有点闪的问题，FASTTRADER-1329
	3）内盘：解决非交易状态是撤单失败无备注提示的问题，FASTTRADER-1344
2.	1)列表配色方案内，增加默认配置设置。对应Bug ID 1342.(wan)
	2)设置-系统参数热键设置没有判断是否重复 的Bug， ID 1341
3.	1)对行情中各种成交量进行正确判断
	2)内盘底层相应优化
	3)(交易通知)控制IE控件显示语言为gb2312
	4）解决报价表构造创建和订阅深度行情之间有个时间差引起行情被忽略的问题
	5）初始化结束后一次加载全部合约行情

1.3.2.68
发布时间：2012-5-14
更新内容：
1. 解决实盘下显示组合单的问题
2. 将服务器配置中的 Simulate改为CTPSimulate, 因为目前Simulate参数主要用于指示是否将合约的ExchangeID由SHFE改为真实交易所ID。(K线模块和插件接口也一并修改，将来处理其它类型模拟系统时再扩展相应标志)

1.3.2.67
发布时间：2012-5-14
更新内容：
1.	1)修改撤单失败的提示信息，FASTTRADER-1326(yang)
	2)调整扩展面板中条件单、预埋单的复选框的逻辑，FASTTRADER-1321
	3)内盘，增加白银期货合约，FASTTRADER-1337
2.	1)修改字符串比较函数mycompare()， 如需要转换为numeric进行比较， 使用mycompare_trynumeric()(liao)
	2)列表框控件增加SetbtrynumericAsComparing()函数，指示该列的字符串比较时需要尝试转换为numeric进行比较
	3)TradeKey结构中增加Direction字段，以适应自成交的情况
	4)删除无用的底层接口
		部分GetPositionDetails、GetPositionDetails2、部分GetPositions
	5)修改部分底层接口，尽量用vector代替map，用FTID代替Key
		GetPosition2、GetPositionDetails3、GetPositionCombs2、GetPositions、GetPositionDetails、GetPositionCombs
		GetAllOrders、GetOrder、GetTriggerOrders、GetTriggerOrders2、GetTradedOrders、GetTradedOrders2、
		GetCanceledOrders、GetCanceledOrders2、GetWaitOrders、GetWaitOrders2、GetAllTrades
		GetTradeInfo、GetTradesOfInstrument、GetAllTradeTotals、GetTradeTotalOfInstrument
	6)增加底层接口
		GetPosition3、GetAllOrders2
	7)因应底层接口的变化，修改UI层对应代码
	8)修改DataListCtrl.hpp的实现，，尽量用vector代替map，用FTID代替Key
	  修改PlatformDataSetList.hpp的实现，尽量用vector代替map，用FTID代替Key
	  删除PositionInfoList中的m_PositionMap
	9)将持仓、持仓明细、报单、成交、成交统计的key结构中的string成员改为字符串数组，方便和插件接口统一
	10)增加Commonxxx的字符串数组定义
	11)language.csv中增加交易所名称对应的项
	12)UI层持仓更新机制采用持仓明细一样的机制，记录lastseq，从底层取持仓信息是，判断seq有没有更新，如没有，则不更新UI
	13)持仓、持仓明细、报单、成交的数据结构中增加PriceTick字段，持仓结构还增加Currency, 持仓明细增加bToday，方便UI层使用，
	14)添加新的持仓、持仓明细、报单、成交数据时，用合约信息中ExchangeID覆盖数据本身的值(模拟系统下，数据本身的值一般为空)
	15)修改底层取挂单时的判断错误
	16)修改持仓查询结果合并时丢失PriceTick导致价格丢失小数位的问题
	17)解决bug1339, 无法撤单的问题。
	   原因是模拟系统报单的ExchangeID都是SHFE，软件在收到报单后根据InstrumentInfo信息修正ExchangeID，从而导致撤单时ExchangeID对不上而失败。
	   修改方法是除持仓查询以外，不修正ExchangeID; 持仓查询结果由于不带ExchangeID信息，还需要从InstrumentInfo中取
3.	1)bug-1336,银期查询转账明细时列表上方应为“银行交易明细”(qiu)
4.	1)修改恢复默认配置后，快捷键不可用的问题，Bug ID 1332(wan)
	2)修改配置选项-键盘快速下单中，选择重复快捷键添加记录时，不能提示快捷键重复的问题，Bug ID 1334
5.	1)预留使用_CrtSetAllocHook地方(ouyang)
	2)解决FASTTRADER-1328  内盘，列表导出后，表格显示不正确  
	3)解决FASTTRADER-1331  内盘，设置内如果不保存设置选择返回主界面，弹出的确认提示需要确认两遍。  
	4)FASTTRADER-1330  内盘，添加完合约组后，重新登录，合约组没有被保存。
	5)PlatformStruct.h中分离出KernelStruct.h
	6)修改GetTradingDay接口
	  修改CMDID_EXCHANGE_CURRENT_TIME_QUERY和CMDID_EXCHANGE_TRADE_TIME_QUERY的响应
	7)解决FASTTRADER-1340 内盘，置顶后重新登录交易终端，置顶失效。
6.	解决卸载不能升级问题(cai)

1.3.2.59
发布时间：2012-5-4
更新内容：
1.	调整下单面板坐标参数，让下单板各子风格合理显示(yang)
	处理下单板浮出时的处理过程，FASTTRADER-1310、FASTTRADER-1311
	内盘：解决下单板五档行情价格拾取错位的问题
	内盘：修复本地条件单已发送勾选处理错误的问题，FASTTRADER-1313
	内盘：调整下单板可视高度，FASTTRADER-1320
	内盘：实现退出时，有未发送的本地条件单和预埋单提示用户，FASTTRADER-1318
	解决盈损单下单时提示选否也清空止盈止损条件信息的问题，FASTTRADER-1314
	解决在盈损单勾选状态下，自动单与盈损单功能冲突的问题，FASTTRADER-1315
	解决盈损单下单时未选中的盈损条件仍然检查并提示不符合最小变动价位的提示问题，FASTTRADER-1316
	解决本地条件单无法暂停的问题，FASTTRADER-1325
	解决快捷改单、编辑条件单、编辑预埋单下单手数可以<=0的问题，FASTTRADER-1323
	文字修改，挂单快速改单窗口，"数量"应该改为"手数"
2.  解决下单面板盈损单勾选状态下与持仓右键菜单快捷平仓、快捷锁仓、反手平仓功能冲突的问题，FASTTRADER-1322
2.	FASTTRADER-1304  内盘，下单板浮出后，选择设置-委托参数，下单板不能自动缩回。  (ouyang)
	FASTTRADER-1307 内盘，交易终端，登录后初始小窗口内，选择设置-委托参数，然后恢复默认设置，再选择设置-自选合约。系统崩溃
	FASTTRADER-1303  内盘，交易终端切换风格时，界面会出现重影
	FASTTRADER-1309  内盘，重新登录窗口弹出后，系统锁屏，重新登录后锁屏密码输入框不消失.
	在网络连接中断添加上log
3.	修改配置面板打开后，保存风格错误的Bug，Bug ID 1305(wan)
	解决修改Bug 131,1311引发的问题。
4.	调整默认布局，在默认的标准/经典/快速布局下，下单板不出现滚动条(liao)
	加载交易风格子菜单里，去掉不必要的分割线
	修改快期风格的资金面板
	1). 将左右移按钮放到右边，并根据配置项的数量动态隐藏、显示这两个按钮。
	2). 同时动态计算查询按钮的位置。
	3). 增加RePosition()方法，用于计算内容控件的位置



1.3.2.58
发布时间：2012-4-28
更新内容：
1.	使layout中的cfg.xml和执行目录下的文件一致(liao)
	修改金额加逗号时，负号后也加逗号的问题
	修改平仓成交不能正确更新持仓明细的问题
	去掉一些不再需要的log输出
	修改key中的string比较方式，先转为double比较，不行再转为longlong比较，不行再用string比较
	key结构中增加tostring()方法，便于log输出
2.	FASTTRADER-1301 内盘，从设置内界面无法返回主界面。(wan)
3.	解决在弹出下单面板时切换风格引起的其他模块不能拖拽的问题(ouyang)
4.	内盘：修复标准下单输入面板未相应OnSize的问题(yang)
	调整下单板内容显示间隔

1.3.2.55
发布时间：2012-4-27
更新内容：
1.	增加日志内容，用于查平仓成交不能正确更新持仓明细的问题

1.3.2.53
发布时间：2012-4-26
更新内容：
1.	修复委托单列表报单时间更新方式，处理系统返回保单类型异常的问题，FASTTRADER-1288(yang)
2.	隐藏表格设置中的下单板界面配置项。对应Bug ID 1287(wan)
	成交记录中的时间，只显示时分秒，Bug ID 1289
	右键菜单中，按功能使用分割线分割显示。Bug ID 1290.
	修复条件单已发送选项失效的问题
	调整OnCfgChange的相应路径
	修改下单板实时信息初始值不恰当的问题
3.	FASTTRADER-1294  内盘，从全屏标准风格切换到经典风格后，窗口缩放显示，但实际还是最大化。  (ouyang)
	FASTTRADER-1292  内盘，标准风格或经典风格下，拖动下单板到其他位置，点击全屏或缩放。系统崩溃。  
	FASTTRADER-1284  资金模块，如果被遮挡不会出现滚动条，无法完整显示  
	FASTTRADER-1283   自动调整完列宽后 按某列排序的箭头造成了遮挡，无法完整显示
	解决变换风格，界面刷新的问题
4.	query拼写错误(qiu)
5.	解决界面刷新不干净(滚动条、边框等)的问题(liao)
	解决平仓出现不是先开先平情况的问题(bug1295): 
		调整持仓明细的Key值结构，将TradeDate和TradeID优先级提高，避免因TradeType的错误影响平仓顺序。
	解决列表框排序不正确问题：
		为了解决列表框里double和int类型字段的排序比较问题，在wxExtListItem和wxExtListItemData中增加如下变量：
		int             m_icolData; // 指定Item对应的Int值
		double          m_dcolData; // 指定Item对应的double值
		bool            m_icolDataValid;//m_icolData是否有效
		bool            m_dcolDataValid;//m_dcolData是否有效
	将列表框表头的排序标识缩小(20->12)，以免占用列头信息的显示区域
	修改列表框排序模式，列表框行数超限，取消自动排序(手动排序仍然可用)；鼠标连续点击同一个列头时，列表框在降序、升序、不排序三种状态之间循环
	platform.xml增加配置项：
        //列表框自动排序时，最大行数。超过这个行数，停止自动排序，以免影响速度
        <MaxItemCountForAutoResort>300</MaxItemCountForAutoResort>
	调整MainFrame::Layout()，修改界面(Panel底边)刷新不干净的问题
         toolsbar的高度可能被自动调整，如28->25，此时m_notebook的位置也需要上移相应像素，否则会使m_notebook和下面的status重叠，造成屏幕刷新不干净
	修改GlobalFunc:: GetAccountFormatString，避免耗费时间的locale操作



1.3.2.52
发布时间：2012-4-16
更新内容：
1.	统一条件单的触发价文字，FASTTRADER-1271(yang)
	查批量、查条件、查赢损、预埋单。将四个模块合并，FASTTRADER-1204
	修改AllOrdersPanel.cpp在多语言下编译不过的问题
	修改移换仓成交处理的问题
	完善管道对业务AllOrder、AllPosition、AllAccount、AllInstrumentID的支持，并修复其中的缺陷。
	优化管道的服务对象的析构过程
	调整4和1部分文字提示
	修改配置对4合1扩展面板的支持
	调整标准风格的参数，是下单板能完整显示，FASTTRADER-1277
	管道：添加查询深度行情功能，并提供解析例子
	保证登录过程正常结束，并进入主界面
	在改变风格和恢复默认配置时隐藏五档行情，FASTTRADER-1279
	调整下单板实时信息提示的刷新机制
	补充一个需要刷新下班板实时信息的处理
	修复主窗体为TopMost时，下单板不能弹出合约、价格下拉框的问题
	修复Parked中需要保存的内存被意外删除的问题
	修复所有委托单撤单按钮隐藏时快捷键仍有效的问题
	解决信息提示框关闭后焦点强制转移到下单板的问题，FASTTRADER-1285
2.	解决FASTTRADER-1272 （任意模块 邮件菜单里的导出列表 生成的文件名称里月份不正确 ）(ouyang)
	GetAccountFormatString添加默认精度
	解决合约保证金和手续费一直不能查询到，查询线程频繁请求的问题
	中金所下午交易时间从13:00开始
	修改cfg.xml，去掉列表框的name属性定义，及其它修改
	解决 FASTTRADER-1280  加载交易风格 经典和标准后增加文字说明  
	FASTTRADER-1281  经典风格的尺寸调整为1024*768  
	去掉Tasks Flag属性来 解决 FASTTRADER-1276 安装过程中，创建桌面快捷方式默认应处于勾选状态
	wxEVT_STYLE_CHANGED区分TYPE_APPLYDEFAULT ，TYPE_APPLYINIT，TYPE_APPLYCHANGED
	解决CQueryOrderParkedPanel内存泄露的问题
	解决COrderServiceThread内存泄露的问题
3.	所有资金字段分段显示。Bug ID 1258.(wan)
	修改最大化系统后，勾选五档行情后，再恢复为默认大小，五档行情没有智能调整位宽的Bug。Bug ID 1273
	重构ShortCutKeysMgr类，删除多余代码。配置文件中删除<ShortCutKey>节点。
	修改选项设置内-显示和下单两个部分设置快捷键时，重复性判断不正确的问题，Bug ID 1275.
	选项设置-显示内，报价表默认有快捷键F1，此时仍可以将其他列表快捷键设置成F1的问题， Bug ID 1274.
	拆分插件功能为独立模块。
	实现新协议下插件的启动，退出控制功能。
	报价表添加自动调整列宽功能。Bug ID：1278
	MainFrame析构时，释放m_vLogData中的内存
	自动调整列宽后，保存最新的列表宽度。Bug ID：1282.
	修改报价表，成交记录响应“自动调整列宽”的消息映射方式。
4.	性能优化：(liao)
 	(1)成交回报更新持仓明细和持仓时，改为增量处理
	(2)当持仓明细记录数量超过阀值时(可配置，缺省500)，成交后不启动对持仓明细的自动查询 
	(3)UI层的持仓明细模块取消订阅报单回报	(4)成交更新持仓时，GetPositionDetails3()取到持仓明细列表后，同时得到底层持仓明细数据Seq的当前最大值。OnRtnTrade将此值和上一次的值比较，如果不变，则不用进行实际更新。这个值和合约相关。调用GetPositionDetails3()时也将带入这个值。GetPositionDetails3中对这个值进行判断，以决定是否需要返回实际的数据。
	(5)更新platform.xml数据格式，及CglobalConfigMgr，删除回写的方法
	(6)底层取消对合约列表的过滤，普通合约和组合合约都保存
	(7)成交更新持仓明细时取消组合单宏的控制，处理组合单成交
	(8)修改列表框性能优化产生的问题，主要是成交统计不更新和持仓明细不更新
	(9)由于成交回报的TradeType有时是0(模拟环境)，更新持仓明细时将TradeType分组合成交和非组合成交(普通成交)处理
	(10)底层持仓明细数据中不再保存数量为0的记录(成交更新持仓时采用增量计算，计算平仓盈亏不再依赖对持仓明细的遍历)
	(11)按快期设置表格奇偶行和标题栏的底色，设置报价表字号为10(和快期一样)
	(12)增加持仓明细列表的数量统计功能
	(13)解决报单、成交、持仓列表框滚动时闪烁或不及时刷新的问题。wxExtListMainWindow::OnScroll中用UpdateWindow代替Refresh 




1.3.2.51
发布时间：2012-4-16
更新内容：
1.	修改组合持仓中的“开仓均价”列名为“开仓价”(wan)
	屏蔽停盘前，有持仓的合约声音提示配置界面。Bug ID 1270
2.	更新语言对照表(yang)
	条件单列表“触发条件”列左对齐，FASTTRADER-1267
	关闭移换仓功能
3.	更新help文档(junbo)
	修改cfg.xml中几个项的默认值bOrderFailSound、bDoubleClickMouseCancel、bCancelFailSound、TradeTimeSoundPrompt四项都由0调整为1.
4.	继续优化DataListCtrl使用的列表框控件
	1)SetItems增加是否需要刷新UI的参数
	2)用InsertItems代替InsertItem，增加是否需要刷新UI的参数
	3)DataListCtrl中UpdateAllItems时，UpdateOneItem_Internal不刷新UI，等Thaw时统一刷新
	4)InsertItem2时直接设置ItemData值，不再单独调用SetItemData


1.3.2.50
发布时间：2012-4-15
更新内容：
1.	更新语言对照表，增加GID_QUERYLOCAL_ORDER(yang)
	解决撤单成功未发出提示音的问题
	修改撤无效状态的挂单提示语(标题)
	解决键盘上下箭头操作 即修改了光标位置，又修改了选项内容的问题，FASTTRADER-1264
	解决未成交单、所有委托单列表多选出现重复菜单相的问题，FASTTRADER-1266
	解决仓位会换同数量不同方向初始化显示不正确的问题，FASTTRADER-1254
	调整语言对照表文字说明
	去除条预埋单列表内的结束时间列。FASTTRADER-1253
	条件单列表去掉"触发价格"列，触发条件内统一显示成快期样式。FASTTRADER-1257
	条件单列表"结束时间"列去掉，增加预埋时间列。FASTTRADER-1256
	修改服务器条件单预埋时间的取值
	解决合约输入框使用鼠标点击添加合约后 光标丢失的问题，FASTTRADER-1263
2. 	修改模块名称(language.csv)(qiu)
3.	解决FASTTRADER-1265 （下单板合约输入框 出现的快捷操作栏 如果切换系统的话。不会消失，仍然显示在最上方 不妥）(ouyang)
	解决FASTTRADER-1259 （内盘，当系统发出声音时会卡一下）
	解决FASTTRADER-1252 （内盘，手数倍率不应该随选项设置改变而改变）
	实现"开盘收盘及小结休息的声音提示" 
4. 	将“联系电话”改为“客服热线”，Bug ID 1269(wan)
5.	优化列表框控件的处理，提高处理速度，解决数据量大时导致程序卡死的问题(liao)
	1)在wxExtListMainWindow中增加 m_mapItemData2RowID, 用于实现FindItems，通过map快速查找列表记录。(原FindItem遍历查找)
	2)增加SetItems方法，更新同一列表记录的多个列时，统一提交Items数据，统一进行RefreshRect，提高效率
	3)在各列表框的UpdateListItemCallBack方法中，对于数值不会改变的项，如合约ID，如果不是新插入行，更新时跳过
	持仓明细的Key结构中增加TradeType，用于组合衍生的持仓明细被打散时，变成两条记录(组合和普通)
	


1.3.2.39
发布时间：2012-4-12
更新内容：
1.	修改合约下拉列表和价格下拉列表的勾子生存周期和注册注销位置.(yang)
	优化合约下拉列表和价格下拉列表的勾子的注销检查
2.	将language.csv误删的部分还原(qiu)
3. 	发布包中增加HypertextNotice.exe(ouyang)


1.3.2.38
发布时间：2012-4-12
更新内容：
1.	<PanelSet>中增加委托模块对应项。Bug ID 1228.(wan)
	上传声音提示相关语言配置
	修改登录框中，不需要验证码时，输入错误密码，登录失败后，验证码变为可输入状态的Bug。Bug ID 1231.
	修改平仓时，自成交后持仓均价及持仓明细显示不正确的问题，Bug ID：1237.
	修改选项设置-下单-键盘快速下单内，买卖方向文字标题不正确的问题，Bug ID 1239
	撤单配置改变时，同时给所有委托单发送改变消息。
	修改当有设置窗口打开没有关闭的情况下选择恢复默认配置，恢复后下单方式选项灰显不能用的Bug， Bug ID：1236
	隐藏配置->撤单界面中的”隐藏撤单“按钮，对应Bug ID 1242；
	修改列表滚动刷新的问题，对应Bug ID：1240.
	添加自动调整列宽多语言对应。
2.	添加“交易通知IE控件显示项目”(ouyang)
	定义和实现IE控件和主窗口的登陆，内容，退出三种copydata消息
	对全部wxDialog实例添加log
	FastTrader进程去掉IE控件文件
	解决FASTTRADER-1235 （盘，设置-系统参数设置内，恢复默认设置与初始化设置不一致 ）
	解决FASTTRADER-1250 （内盘，连续开仓下单后，资金账户列表多项数据不正确）
3.	调整显示文字，FASTTRADER-1233(yang)
	解决删除盈损单，相关条件单未跟着刷新的问题，FASTTRADER-1234
	解决报价表自动单填单未按自动开平策略执行的问题
	解决键盘快捷键下单方向处理不恰当的问题
	解决恢复默认配置时，下单倍数为重置的问题
	解决合约面板不能自动析构导致进程不退出的问题
	单击和双击持仓和报价表，以及键盘快捷下单，均按自动下单处理，FASTTRADER-1245
	自动填单时如既有平今也有平仓，按平今(平今、价格、数量)填单。FASTTRADER-1245
	持仓模块，右键菜单项"快捷锁仓"，"快捷平仓"，"市价反手"按总持仓量处理 ，FASTTRADER-1245
	下单板合约输入框的列表当前选项随光标移动，FASTTRADER-1232
	解决移仓时原始合约平仓方向不正确的问题，FASTTRADER-1244
	解决快速改单未显示的问题，FASTTRADER-1251
	解决撤单快捷键不起作用的问题，FASTTRADER-1243
4.	FASTTRADER-1249 内盘，客户端自动升级时，升级进度条百分比数字会出现大于100%的现象(cai)
5.	修改银期BUG，1标准风格增加转账和查询银行余额结果的提示框  2标准风格下列表各列顺序调整(qiu)
	银期转账提示对话框修改，替换掉wxMessageBox


1.3.2.37
发布时间：2012-4-6
更新内容：
1.	加上析构后获取全部子窗口信息的日志，用以测试进程不退出和退出崩溃(ouyang)
	使用Win32 API获取此时属于本进程的所有顶级窗口
2.	增加各种声音提示设置界面。(wan)
	修改 默认安装完的尺寸下时，勾选下单版的五档行情窗口，下单板窗口无法完整显示 的Bug，Bug ID 1212.
3.	模块名”所有委托单“改成“委托”(qiu)
4.	修改 选项设置-显示内板块名称列表有两行空白行 的Bug， Bug ID 1222. （持仓和持仓明细合并后共用一个显示名）(wan)
	修改持仓明细中，持仓类型显示错误的Bug。
	修改持仓结构中的成员名YdPositionLeft为YdPositionRemain
	修改资金面版两侧颜色与表格内颜色不一致的问题。对应Bug ID 1226.
	添加自动调整列宽功能，对应Bug ID：1144
5.	修改资源读取的错误并优化rc文件，删除resource.h文件(ouyang)
	删除多余的wxFrame类，修改在wxApp显示对话框，而不是ShowModal()
	优化主窗口CProgressDlg，删除多余代码
	log记录类从MainFrame迁移到FrameBase类
	解决FASTTRADER-1221（内盘，交易终端安装完后默认风格内，报价表标题仍然显示）
	解决FASTTRADER-1220（内盘，添加合约组后缩放交易终端，合约组没有跟着等比例缩放）
	解决FASTTRADER-1227 (内盘，经典风格下，资金账户列表不是固定大小，仍然可调 )
	解决FASTTRADER-1214 (经典风格的默认设置无法完整显示，下方模块都被遮盖。建议调整该种风格的尺寸。)  
	修正交易所交易时间
	解决FASTTRADER-1218 （内盘，除资金账户列表外，其余列表右键点击空白处均不能弹出右键菜单）
	解决FASTTRADER-1213 （标准风格下 默认尺寸800*600 先最大化，再还原，结果布局被改变了）
6.	优化配置文件读取逻辑(yang)
	修改市价提示语
	增加委托确认对话框中价格辅助面板
	下单板价格辅助面板中添加买一、卖一、最新价个处理


1.3.2.36
发布时间：2012-4-1
更新内容：
1.	银期模块中wxComboBox改为不可编辑(qiuying)
2.	解决FASTTRADER-1202（合约组占用太大，建议同快期一样修改到右上角位置）(ouyang)
	修改分隔条宽度为2像素
3.	解决GUI内存泄露的问题(ouyang)
4.	添加声音提示功能，FASTTRADER-1196(yangguiming)
	给未选择列表行的按钮添加提示，FASTTRADER-1209


1.3.2.35
发布时间：2012-3-31
更新内容：
1.	向主窗体发送下单板5档价格列表显示隐藏事件，及下单板最小可见宽度；
	调整五档行情显示开关的发送数据
2.	修改代码，使下单板能根据显示内容，自动调整大小。对应Bug ID：1200
	修改持仓模块中，有昨仓的记录，开仓时，总多仓显示错误的Bug。Bug ID：1206 
3.	解决批量单点"X"不能自动关闭窗体的问题，FASTTRADER-1208
4.	取消对市价模式的支持，问题bug 	FASTTRADER-1198
5.	修改平仓时，持仓和持仓明细中保证金不刷新的Bug。对应Bug ID：1205
6.	添加第三方接口写日志文件的代码
7.	解决合约列表中，保证金率查询响应时不动态更新合约列表的问题，删除合约列表模块中无用的m_CS
	优化map中删除iterator的方法


1.3.2.34
发布时间：2012-3-29
更新内容：
1.	将可开手数和可平数统一使用0代替-
	持仓右键菜单快捷平仓项确认对话框按下单的配置走，FASTTRADER-1195	
2.	修改系统库文件依赖方式，在执行目录中增加三个dll文件，取消安装vcredist
3.	把预埋单、条件单的"错误信息"字样改为"信息"，FASTTRADER-1199
4.	主框架支持无标签的页面后修改相应布局文件
5.	去掉选项设置-下单-常规内的"不支持市价的品种用涨跌停限价模拟"功能,Bug ID 1198
6.	修改bug1197: (内盘，交易终端安装时，选择安装路径时候可选择的列表显示不正确)。配置安装程序，修改安装程序，允许选择硬盘。同时将默认安装目录改为Program Files 
	修改DataListCtrl.hpp，修改第一列单元格时，有可能会改掉行相关的UserData。所以这里进行保护，清除ItemData的Mask。解决找不到指定行的隐患。



1.3.2.33
发布时间：2012-3-28
更新内容：
1.	更新持仓数据时，直接计算，不依赖持仓明细数据，包括
?	历史剩余仓位(当前净仓位-净今仓)
?	持仓盈亏(当前价值-持仓成本)
?	浮动盈亏(当前价值-开仓成本)
2.	底层配置platform.xml修改：
?	成交时是否更新持仓的参数默认值为1
?	修改底层配置读写类GlobalConfigManager，改为静态方法
3.	成交时自动重新查询
?	platform.xml可以配置成交后是否启动自动重查持仓、持仓明细、资金，以及重查前延迟的秒数
?	执行成交后自动重新查询的静态类，在QryQueue线程中定时处理
?	根据持仓模块当前显示的模式(持仓、明细、组合)，决定先查哪个，然后查资金，最后查其它持仓内容
?	删除UI层得到成交回报后重新查询资金的方法，在底层统一处理重新查询
4.	解决键盘快速填单后输入焦点不正确的问题。FASTTRADER-1190
	解决条件单、盈损单错误删除记录的问题。FASTTRADER-1184
	优化移换仓代码
5.	修改银期BUG1189(内盘，标准风格下点击转账-银期转账，当只有一个银行可选时，应该自动将银行信息载入到左侧信息)
6.	隐藏下单板光标定位配置选项。对应Bug ID 1193.
7.	修改银期转账界面的OnSize方法，使其能自动适应父窗体大小。对应Bug ID 1194.
8.	注销下单后移动输入焦点的代码
9.	统一报价表和持仓自动平仓时的填单方法下单部分，报价表部分未解决，FASTTRADER-1192


1.3.2.32
发布时间：2012-3-27
更新内容：
1.	MainFrame，MyApp类添加log文件记录，底层各个类析构函数添加log文件记录
2. 	InstrumentStu添加交易时间段和是否模拟行情字段
3.	解决FASTTRADER-1187（内盘，未成交列表右键点击选择表格列设置，默认打开选项设置的所有委托单列表。）
4.	修改内盘，添加合约组时提示不妥 的Bug。Bug ID 1188.

1.3.2.31
发布时间：2012-3-26
更新内容：
1.	添加底层配置文件platform.xml，不需要自动保存。
2.	通过底层配置参数控制盘中接收成交回报时，是否刷新持仓，持仓明细，资金界面。
3.	解决内盘，选项设置下单-键盘快速下单内，添加快捷键，超价设置无法保存的问题。Bug ID：1181.
4.  	移换仓，修改系统撤单时不能进行到开仓的问题
	移换仓，修改指定价没有正确转换的问题
	移换仓，修改仓位互换指定价调节按钮失常的问题
	修改报单提示里撤单被过滤掉的问题
	给用户看的log里不过滤报单状态重复的情况，标题改为“报单状态”
	解决鼠标快速平仓时，开平方向不正确的问题
5.	统一计算动态盈亏，可用资金和风险度，如果没有获取到显示“-”
	解决资金面板没有一列时程序出错的问题
6.	解决资金面板风险度当计算项有无效值赋值错误的问题
7.	解决持仓模块切换时没有及时刷新的问题
8.	解决列表框的列全部设置为不显示时崩溃的问题
	解决合约列表列全部设置为不显示时崩溃的问题
9.	在TradeSpi中取消对PlatformStru_TradingAccountInfo结构体中StaticProfit，DynamicProfic，Available，hRiskDegree的计算
10.	统一条件单、盈损单、预埋单只能删除暂停和激活两个状态的记录，FASTTRADER-1184
	解决条件单行情计算时没正确处理无效值的问题，FASTTRADER-1182，FASTTRADER-1183
	解决条件单、盈损单、预埋单被删除的记录不能进行添加合约的问题，FASTTRADER-1186
	解决TradeInfoDlg不显示第一条记录Title的问题。


1.3.2.30
发布时间：2012-3-22
更新内容：
1.	修改持仓明细中现价显示错误的问题
	修改持仓列表中，在配置中修改列顺序后，数据显示错位的Bug。
2.	移换仓的修改
	修改提示语
	完成后隐藏编辑、重置按钮
	优化部分代码
	对可平量不等于持仓量的合约进行处理，提示仓位先撤单后移换仓。
3. 	修改平仓时，可平昨量显示错误的问题
	修改平仓时，已平仓位无法消失的问题。
4.	使用对话框显示金士达配置面板
	资金面板不再延时计算
	解决对话框显示金士达配置面板重复进入的问题
5.	持仓明细列表框中，成交ID使用UpdateCol_String3宏来显示
	持仓中考虑平仓量对平今量和平昨量计算的影响
	UpdatePositionFreezeFieldsByOrders_Internal()中，只有相关值发生了变化，才更新UpdateSeq
6.	修改配置部分代码，使界面风格不是金士达风格时，以对话框形式弹出配置页面


1.3.2.29
发布时间：2012-3-21
更新内容：
1.	持仓中的平仓挂单量只包含平仓和平昨的挂单量
2.	持仓中的多头开仓价和空头开仓价是均价，不按最小变动价位规整
3.	解决所有委托单合约编号显示不对的问题
4.	成交、所有委托单、持仓明细中，方向的买和卖位置错开
5.	解决（原无持仓）合约成交回报时卡死及持仓不刷新的问题

1.3.2.28
发布时间：2012-3-21
更新内容：
1. 	成交更新持仓时，如果原来有持仓记录，在原记录基础上更新
	持仓中不支持的项目用“-”表示
	修改有成交后，成交合计不对的问题(FTID没更新)
2.	优化移换仓的显示结构体及相关代码
	修复GetAskCloseVolume()函数不能正确出来无挂单的情况
	优化GetHoldingVolume()、GetAskCloseVolume()、GetPreVolume()适用子帐号情况
3.	解决持仓模块在持仓和持仓明细切换时移换仓按钮错位的问题
4.	修改排序：
	排序列值相等时，按行插入的先后顺序排序(m_LineID)
	排序列的数值更新时，只有需要调整行顺序的情况下才全屏刷新
5.	修改所有委托单交易所名称的显示方式
	解决FASTTRADER-1143（模块的选中行的背景颜色 请不要选择蓝色并且还覆盖显示各数值的颜色 请参考快期方式用透明圈选凸显选中行）
6.	修改合并持仓产生的问题。
7.	修改平仓时，持仓记录显示错误的Bug。
8.	修改UI列表框和底层数据对应关系，不再要求一一对应。UI列表框先比较新旧数据，更新UI，然后再统一更新列表框支持数据。这样可以允许列表框增加一些冗余字段。
	修改并优化各UI列表框的数据更新回调函数
	删除持仓数据结构中的TodayOpenVolume和TodayCloseVolume，用OpenVolume和CloseVolume代替
	成交更新持仓时，开仓量、平仓量、开仓金额、平仓金额从成交记录中计算
	持仓中的历史持仓剩余仓位YdPositionLeft从持仓明细中计算
	使用InvestorID作为szAccount，在报单回报、成交回报、报单查询响应、成交查询响应、持仓(明细)查询响应时赋值
	开仓成本 = 未平持仓明细的开仓金额的总和(只计算未平部分)
	根据成交生成持仓时，从原有持仓记录中获取YdPositon



1.3.2.27
发布时间：2012-3-19
更新内容：
1.	重构底层数据管理
	对报单、成交、持仓数据使用CPlatformDataSetList类进行保存、维护
	增加盘中查询数据响应的处理机制
	增加维护持仓数据
	取消报单数据查询过程中新报单来到的处理，简化查询结果的处理过程
	持仓明细和成交记录查询同上
	修改对持仓和持仓明细数据结构的定义
	增加组合持仓数据的维护
2.	修改底层资金数据管理
	完善收到资金查询响应的处理
3.	重构UI层的所有委托单、未成交单、持仓、持仓明细、成交记录模块
	使用CDataListCtrl类进行列表框数据进行统一管理
	将列表框数据的维护抽象到父类中进行
	将持仓和持仓明细合并在一个panel中，将来组合持仓也放在同一panel中
4.	优化登录过程中登录步骤信息的显示，避免闪烁
5.	登录过程增加持仓数据的查询过程



1.3.2.26
发布时间：2012-3-9
更新内容：
1. 修改标准风格和精简风格下没有资金列表的Bug。
2. 修改分隔条初始位置值为相对值。
3. 去掉资金账户页面右键菜单中的改变显示风格按钮
4. 给排序列增加记忆功能。
5. 修改bug1139: 内盘，经典风格下，鼠标移到左上角报价表名称处，出现多余按钮

1.3.2.25
发布时间：2012-3-8
更新内容：
1. 添加通知消息的Html的字符集标签，解决现实乱码问题
2. 修改启动时判断目录只读的策略
3. 解决"修改模块名超过32个字符，同时添加快捷键，程序崩溃"的问题
4. 查询银行签约关系相应时，增加内存区的reset，并增加日志内容
5. 所有委托单，未成交单，成交记录添加“重新查询”按钮和功能
6. 解决“内盘，服务器端版本小于本地版本时候仍然提示升级。确定后升级失败。 ”问题
7. 解决“登录框 登录过程中也可以点击保存账户位置进行勾选或取消勾选操作”问题 
8. 持仓，持仓明细添加“重新查询”按钮和功能
9. 银期查询签约关系改为只查一次
10.1.  添加userData目录写.dat文件、.pks文件失败提示
10.2.  解决未成交单冻结手续费、冻结保证金不刷新的问题
10.3.  调整预埋单提示语
10.4.  解决双击任务条上FastTrader的Title，然后点击小窗委托背景不刷新的问题
10.5.  优化预埋单编辑窗体的显示
11. 添加5个模块重新查询响应函数(还没有考虑界面同步更新和底层处理重复数据的问题)
12. 资金账户横向显示时，不显示标签页。

1.3.2.24
发布时间：2012-3-7
更新内容：
1. 系统启动时，判断安装路径是否为只读，为只读时弹出提示并退出程序。
2. 添加ModuleIsQry配置项，表示是否是查询模式
3. 修改资金面板支持查询模式，添加SetModuleDataQry，GetModuleDataQry函数
4. 解决FASTTRADER-1122（内盘，登录界面登录失败后，登录进度条仍然有一段进度）
5. 修改持仓明细和持仓支持查询模式
6. 修改升级模块传入全路径（包括文件名）
7.1.  只对必要的模块的列表设置排序选项
7.2.  用自定义的消息对话框解决全撤单时记录过多的显示不全的问题。
7.3.  解决盈损单从委托价转为成交价时计算出错的问题。
7.4.  修改本地预埋单、本地条件单、本地盈损单操作失败的提示信息。
7.5.  解决风险管理价格超出判断不正确的问题。
7.6.  把合约输入框文本输入焦点定位到文本尾部。
7.7.  在void MainFrame::OnIconize(wxIconizeEvent& evt)添加调试输出代码
8.1. 对QryQueue设置初始化查询开始和结束的标志，初始化查询过程中不查询费率
8.2. 优化初始化查询中持仓明细的部分，全部查完后再根据行情更新动态盈亏值
8.3. 订阅、退订行情时进行判断，如果已经订阅/退订，则不再重复进行
8.4. 列表控件排序算法中，增加对数字比较值为零的处理
9. 修改FASTTRADER-1125 
10.修改页面缩放方式，限制下单板窗口最小大小。
11.修改交易风格切换时，反复提示是否保存的Bug。



1.3.2.23
发布时间：2012-3-6
更新内容：
1. 解决成交记录模块死锁带来的包括无法正常退出在内的系列问题
2. 启动时检查目录是否可写，如不可写，则提示用户
3. 登陆窗口初始化查询全部数据，去掉InitQryThread
4. 修改m_pUserNoticeDlg没有初始化的问题，
5. 银期界面优化，查询签约银行移到底层，动态显示查询过程
6. 修改登录时不能正确显示登录步骤信息的问题

1.3.2.22
发布时间：2012-3-5
发布说明：用于回归测试
更新内容：
1. 交易终端如果开着，则循环判断是否关闭，否则不继续执行升级
2.1. 按买卖价下批量单时，如买卖价无效，则提示用户，并延迟下单，直到买卖价有效
2.2. 下批量单时，如果点选按买卖价或最新价，则将价格输入框灰化
2.3. 调整批量单和条件单窗口中模块位置和尺寸，解决显示不全问题
3. 查询队列优先级处理，降低所有费率查询的优先级
4. 修改结算后请求查询保证金监管系统经纪公司资金账户密钥失败的问题，用QryQueue机制请求密钥，请求失败时会再次请求
5. 列表框默认加上排序功能
6. 添加MKTPriceUse项
7. 打包时排除.svn子目录
8. language.csv中添加DONOT_DELCUR
9. 银期经典风格查询账户余额BUG修改
10. 替换自选合约列表控件为wxGrid控件。
11. 增加下单成功后光标定位配置项。
12.1.  优化“查批量单”板块，大幅调高List的更新效率。
12.2.  用所有委托单的代码方法，重构“未成交单”、“成交记录”板块，解决冻结保证金、冻结手续费、手续费不刷新的问题，和成交统计添加合约不正确的问题。
12.3.  增下单成功后 光标定位的选项设置。
12.4.  委托确认下单板确认后 才判断手数和价格是否超过限制。
12.5.  实现预埋单、条件单、盈损单板块 勾选全部和勾选已发送等选项时，刷新列表
12.6.  解决未成交平今单不显示冻结手续费的问题
12.7.  解决点击小窗委托后在小窗口内点击合约输入框刷出下拉选项，此时关闭小窗口，再次点击下单板合约输入框，下拉菜单不能够出现了。
12.8.  解决下单板 价格设置成跟盘价后 手动修改价格 仍然恢复成跟盘价 处理方式不妥的问题。
12.9.  解决对已删除或已触发的预埋单进行编辑、删除、暂停、激活操作，没有任何错误提示的问题。
12.10. 解决盈损单触发完成交易后，编辑修改无任何错误提示的问题。
12.11. 解决通过持仓里的合约快速下单，下单板的合约变化不会触发报价表的合约显示。 之后再直接修改下单板的合约，也不更改报价表的显示的问题。
12.12. 解决键盘快速下单弹出合约为找到的问题。
12.13. 解决在盈损下单风格下，开平选项仍然能改变的问题。
12.14. 解决盈损单下单成功后，修改偏移设置，没有效果的问题。
12.15. 解决可开手数计算错误的问题。
13. jira中截止到2012-3-5以前状态解决的bug（2周内）

